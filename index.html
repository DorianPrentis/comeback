<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Transmission Pending</title>

<style>
body {
    background: black;
    color: #00ff88;
    font-family: "Courier New", monospace;
    text-align: center;
    padding-top: 80px;
    transition: background 0.5s ease;
}

h1 {
    letter-spacing: 3px;
    font-weight: normal;
    margin-bottom: 40px;
}

.address {
    font-size: 14px;
    word-break: break-all;
    opacity: 0.7;
    margin-bottom: 30px;
}

.progress-container {
    width: 60%;
    margin: 40px auto;
    background: #111;
    height: 8px;
    border-radius: 10px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    width: 0%;
    background: #00ff88;
    transition: width 1s ease;
}

.balance {
    margin-top: 20px;
    font-size: 16px;
}

.usd {
    margin-top: 5px;
    font-size: 13px;
    opacity: 0.5;
}

.footer {
    margin-top: 80px;
    font-size: 12px;
    opacity: 0.4;
    letter-spacing: 2px;
}

.qr {
    margin-top: 40px;
    opacity: 0.8;
}

.blink {
    animation: blink 1.5s infinite;
}

@keyframes blink {
    50% { opacity: 0.2; }
}
</style>
</head>
<body>

<h1 class="blink">I WILL RETURN SOON</h1>

<div class="address">bc1q8f52zsffdgkxc2gk3rku2jmjzkkjzq0z8f6tvf</div>

<div class="balance" id="balance">Awaiting signal...</div>
<div class="usd" id="usdValue"></div>

<div class="progress-container">
  <div class="progress-bar" id="progress"></div>
</div>

<div class="qr">
  <img id="qrCode" width="150">
</div>

<div class="footer">
    Transmission in progress...
</div>

<script>
const address = "bc1q8f52zsffdgkxc2gk3rku2jmjzkkjzq0z8f6tvf";
const goal = 33;
let lastBalance = 0;

async function getBTCPrice() {
    const response = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd");
    const data = await response.json();
    return data.bitcoin.usd;
}

async function getBalance() {
    try {
        const response = await fetch(`https://blockstream.info/api/address/${address}`);
        const data = await response.json();

        const funded = data.chain_stats.funded_txo_sum;
        const spent = data.chain_stats.spent_txo_sum;
        const balanceBTC = (funded - spent) / 100000000;

        document.getElementById("balance").innerText =
            balanceBTC.toFixed(6) + " BTC received";

        let percent = (balanceBTC / goal) * 100;
        if (percent > 100) percent = 100;
        document.getElementById("progress").style.width = percent + "%";

        const price = await getBTCPrice();
        const usd = balanceBTC * price;
        document.getElementById("usdValue").innerText =
            "â‰ˆ $" + usd.toLocaleString(undefined, {maximumFractionDigits: 0});

        if (balanceBTC > lastBalance) {
            document.body.style.background = "#001a0f";
            setTimeout(() => document.body.style.background = "black", 500);
        }

        lastBalance = balanceBTC;

    } catch (error) {
        document.getElementById("balance").innerText = "Signal lost...";
    }
}

document.getElementById("qrCode").src =
    "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=" + address;

getBalance();
setInterval(getBalance, 60000);
</script>

</body>
</html>
